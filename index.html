<!DOCTYPE html>
<html>
  <head>

  	<script type="text/javascript">
  		function puntos(identificador){
  			document.getElementsByClassName("punto_seleccionado")[0].className="punto-minimapa";
  			document.getElementById(identificador).className="punto_seleccionado";
  			var pixelesAlt=document.getElementById(identificador).style.left;
  			var pixeles2Alt="";
  			var pixelesAnc=document.getElementById(identificador).style.top;
  			var pixeles2Anc=""
  			for(i=0 ; i < pixelesAnc.length-2 ; i++){
  				pixeles2Anc+=pixelesAnc.charAt(i);
  			}
  			for(i=0 ; i < pixelesAlt.length-2 ; i++){
  				pixeles2Alt+=pixelesAlt.charAt(i);
  			}
  			pixeles2Alt=-parseInt(pixeles2Alt)+150
  			pixeles2Anc=-parseInt(pixeles2Anc)+150
  			document.getElementById("movil").style.left=pixeles2Alt+"px"
  			document.getElementById("movil").style.top=pixeles2Anc+"px"

  			
  			//document.getElementById("movil").style.left
  			


  		}
  	</script>
    <meta charset="utf-8">
  <title>Celia Tour</title>
    <!-- Javascript de pannellum framework -->
    <script src="pannellum/pannellum.js"></script>
    <!-- Css de pannellum framework -->
    <link rel="stylesheet" href="pannellum/pannellum.css">
     <!-- Estilos del panel de informacion -->
    <link rel="stylesheet" href="panel.css">
     <!-- Estilos generales -->
    <link rel="stylesheet" href="estilos.css">
	<!--librerias JQuery & JQuery ui-->
	<script src="https://code.jquery.com/jquery-1.7.1.min.js"></script>
	<script src="https://code.jquery.com/ui/1.8.16/jquery-ui.js"></script>
    
  </head>
  <body>
    
    <div class="contenedor">
      <div id="panorama">
        <!-- Plantilla que se debe seguir para cada bloque de informacion -->
          <div id="myModal" class="modal">
            <!-- Modal content -->
            <div class="modal-content">
              <div class="modal-header">
                <span class="close">&times;</span>
                <h2>Escudo Almeria</h2>
              </div>
              <div class="modal-body">
                <img src="museo.jpg">
                <p>Some text in the Modal Body Some text in the Modal Body Some text in the Modal Body Some text in the Modal Body Some text in the Modal Body Some text in the Modal Body Some text in the Modal Body</p>
                <p>Some other text...Some other text...Some other text...Some other text...Some other text...Some other text...Some other text...Some other text...Some other text...Some other text...Some other text...Some other text...</p>
              </div>
              <div class="modal-footer">
                <h3>(compartir esto con X en redes sociales)</h3>
              </div>
            </div>
          </div>
          <div id="myModal1" class="modal">
            <!-- Modal content -->
            <div class="modal-content">
              <div class="modal-header">
                <span class="close">&times;</span>
                <h2>Objeto valioso</h2>
              </div>
              <div class="modal-body">
                <img src="almeria.png">
                <p>Sisi simba in the Modal Body Some text in the Modal Body Some text in the Modal Body Some text in the Modal Body Some text in the Modal Body Some text in the Modal Body Some text in the Modal Body</p>
                <p>Some other text...Some other text...Some other text...Some other text...Some other text...Some other text...Some other text...Some other text...Some other text...Some other text...Some other text...Some other text...</p>
              </div>
              <div class="modal-footer">
                <h3>(compartir esto con X en redes sociales)</h3>
              </div>
            </div>
          </div>
        <div class="ctrl" id="fullscreen">â¤¢</div>
        
		<div id="transparente">
			<div id="movil" style="top: 0px;left:0px;">
				<div id="p1f1" class="punto_seleccionado" onclick="puntos('p1f1'); viewer.loadScene('cuarta')" style=" top: 415px;left: 442px;"></div>
				<div id="p1f2" class="punto-minimapa" onclick="puntos('p1f2'); viewer.loadScene('quinta')" style="top: 415px;left: 315px;"></div>
				<div id="p1f3" class="punto-minimapa" onclick="puntos('p1f3'); viewer.loadScene('sexta')" style="top: 415px;left: 170px;"></div>
				<div id="p1f4" class="punto-minimapa" onclick="puntos('p1f4'); viewer.loadScene('undecimo')" style="top: 195px;left: 170px;"></div>
				<div id="p1f5" class="punto-minimapa" onclick="puntos('p1f5'); viewer.loadScene('duodecima')" style="top: 222px;left: 250px;"></div>
				<div id="p1f6" class="punto-minimapa" onclick="puntos('p1f6'); viewer.loadScene('trece')" style="top: 300px;left: 446px;"></div>
				<div id="p1f7" class="punto-minimapa" onclick="puntos('p1f7'); viewer.loadScene('catorce')" style="top: 350px;left: 486px;"></div>

			</div>
		</div>
    </div>
      </div>
	
<script>
  //create viewer
viewer = pannellum.viewer('panorama', {   
    "default": {
      
        "firstScene": "cuarta",
        "sceneFadeDuration": 1000,
        "autoLoad": true,
        "showControls": false,
        "mouseZoom": false,
        "preview": "previewCentro.jpg",
		"compass": true,
        "ignoreGPanoXMP": false
        //Se utiliza para saber en el punto exacto donde colocar los hotspot al hacer click en consola informa del punto.
        //"hotSpotDebug": false
    },
  //En escenas va cada foto donde vamos a saltar
    "scenes": {
        "primera": {
          //Angulo de vision
            "hfov": 120,
          //Altura si sumanos va hacia arriba si restamos hacia abajo
            "pitch": 70.4,
          //A los lados, si sumanos va hacia la derecha y si restamos hacia la izquierda
            "yaw": 174,
            "type": "equirectangular",
          //Aqui se carga la imagen
            "panorama": "salonActosMedio1.jpg",
          //Array de puntos para pnchar los de info para informacion y scene para saltar a esa escena
            "hotSpots": [
                {
                    "pitch": -7.4,
                    "yaw": 166.5,
                    "type": "info",
                    "cssClass": "custom-hotspot-info",
                    "clickHandlerFunc": panel,
                    "clickHandlerArgs": "myModal"
                },
                {
                    "pitch": 84.6,
                    "yaw": 162.9,
                    "type": "info",
                    "text": "Informacion Importante",
                    "cssClass": "custom-hotspot-info",
                    "clickHandlerFunc": panel,
                    "clickHandlerArgs": "myModal1"
                },
                {
                    "pitch": -9.3,
                    "yaw": -92.9,
                    "type": "scene",
                  
                    "cssClass": "custom-hotspot-flecha",
                    "sceneId":"tercera"
                },
                {
                    "pitch": -7.4,
                    "yaw": 91.3,
                    "type": "scene",
                   
                    "cssClass": "custom-hotspot-flecha",
                    "sceneId":"segunda"
                },
				{
                    "pitch": -3.4,
                    "yaw": -3,
                    "type": "scene",
                  
                    "cssClass": "custom-hotspot-atras",
                    "sceneId":"cuarta"
                }
				
            ]
        },   
      "segunda": {
            "hfov": 120,
            "pitch": -3,
            "yaw": 117,
            "type": "equirectangular",
            "panorama": "salonActosAtras1.jpg",
            "hotSpots": [
                {
                    "pitch": -16.5,
                    "yaw": 5.5,
                    "type": "info",
                    "text": "Informacion Importante",
                    "cssClass": "custom-hotspot-info",
                    "clickHandlerFunc": panel,
                    "clickHandlerArgs": "myModal"
                },
                {
                    "pitch": -24.1,
                    "yaw": 181.9,
                    "type": "scene",
                  
                    "cssClass": "custom-hotspot-atras",
                    "sceneId":"primera"
                }
            ]
        },  
      "tercera": {
	  
	  
			"hfov": 120,
            "pitch": -3,
            "yaw": 117,
            "type": "equirectangular",
            "panorama": "salonActosMesa1.jpg",
            "hotSpots": [
                {
                    "pitch": -18.4,
                    "yaw": -4.3,
                    "type": "scene",
                    "text": "Atras",
                    "sceneId": "primera",
                    "cssClass":"custom-hotspot-atras"
                },
                {
                    "pitch": -1.7,
                    "yaw": 169.3,
                    "type": "info",
                    "text": "Informacion Importante",
                    "cssClass": "custom-hotspot-info",
                    "clickHandlerFunc": panel,
                    "clickHandlerArgs": "myModal"
                }
              
              ]
      },
	  "cuarta": {
			"hfov": 120,
            "pitch": -3,
            "yaw": 117,
            "type": "equirectangular",
            "panorama": "111.jpg",
			"hotSpots": [
				{
					"pitch": -18,
					"yaw": -84,
					"type": "scene",
                   
					"cssClass": "custom-hotspot-flecha",
					"sceneId": "primera"
				},
				{
					"pitch": -6,
					"yaw": 3.8,
                   
					"type": "scene",
					"cssClass": "custom-hotspot-flecha",
					"sceneId": "quinta"
				},
				{
					"pitch": -5,
					"yaw": 127,
					"type": "scene",
                  
					"cssClass": "custom-hotspot-flecha",
					"sceneId": "catorce"
				}
			]
	  },
	   "quinta": {
			"hfov": 120,
            "pitch": -3,
            "yaw": 117,
            "type": "equirectangular",
            "panorama": "22.jpg",
			"hotSpots": [
				{
					"pitch": -10,
					"yaw": 160,
					"type": "scene",
                 
					"cssClass": "custom-hotspot-flecha",
					"sceneId": "cuarta"
				},
				{
					"pitch": -3,
					"yaw": -21,
                    
					"type": "scene",
					"cssClass": "custom-hotspot-flecha",
					"sceneId": "sexta"
				},
			]
	  }, 
	    "sexta": {
			"hfov": 120,
            "pitch": -3,
            "yaw": 117,
            "type": "equirectangular",
            "panorama": "33.jpg",
			"hotSpots": [
				{
					"pitch": -7,
					"yaw": 163,
					"type": "scene",
                  
					"cssClass": "custom-hotspot-flecha",
					"sceneId": "quinta"
				},
				{
					"pitch": -15,
					"yaw": -7.7,
					"type": "scene",
                 
					"cssClass": "custom-hotspot-flecha",
					"sceneId": "septima"
				},
				{
					"pitch": -2,
					"yaw": 68,
					"type": "scene",
                    
					"cssClass": "custom-hotspot-flecha",
					"sceneId": "undecimo"
				}
			]
	  },
	  "septima": {
			"hfov": 120,
            "pitch": -3,
            "yaw": 117,
            "type": "equirectangular",
            "panorama": "44.jpg",
			"hotSpots": [
				{
					"pitch": -15,
					"yaw": -59,
					"type": "scene",
                  
					"cssClass": "custom-hotspot-atras",
					"sceneId": "sexta"
				},
				{
					"pitch": -7,
					"yaw": 53,
					"type": "scene",
                  
					"cssClass": "custom-hotspot-flecha",
					"sceneId": "decima"
				},
					{
					"pitch": -11,
					"yaw": -151,
					"type": "scene",
                    
					"cssClass": "custom-hotspot-flecha",
					"sceneId": "novena"
				}
			]
	  },  
	   "octava": {
			"hfov": 120,
            "pitch": -3,
            "yaw": 117,
            "type": "equirectangular",
            "panorama": "55.jpg",
			"hotSpots": [
				{
					"pitch": -15,
					"yaw": -59,
					"type": "scene",
                  
					"cssClass": "custom-hotspot-atras",
					"sceneId": "septima"
				}
			]
	  },  
	   "novena": {
			"hfov": 120,
            "pitch": -3,
            "yaw": 117,
            "type": "equirectangular",
            "panorama": "66.jpg",
			"hotSpots": [
				{
					"pitch": -2,
					"yaw": -147,
					"type": "scene",
                 
					"cssClass": "custom-hotspot-atras",
					"sceneId": "septima"
				}
			]
	  },  
	   "decima": {
			"hfov": 120,
            "pitch": -3,
            "yaw": 117,
            "type": "equirectangular",
            "panorama": "55.jpg",
			"hotSpots": [
				{
					"pitch": -2,
					"yaw": -147,
					"type": "scene",
                  
					"cssClass": "custom-hotspot-atras",
					"sceneId": "septima"
				}
			]
	  },  
	   "undecimo": {
			"hfov": 120,
            "pitch": -3,
            "yaw": 117,
            "type": "equirectangular",
            "panorama": "77.jpg",
			"hotSpots": [
				{
					"pitch": -3.4,
					"yaw": -171,
					"type": "scene",
                  
					"cssClass": "custom-hotspot-flecha",
					"sceneId": "duodecima"
				},
				{
					"pitch": -5,
					"yaw": -105,
					"type": "scene",
                  
					"cssClass": "custom-hotspot-flecha",
					"sceneId": "sexta"
				}
				
			]
	  },  
	   "duodecima": {
			"hfov": 120,
            "pitch": -3,
            "yaw": 117,
            "type": "equirectangular",
            "panorama": "88.jpg",
			"hotSpots": [
				{
					"pitch": 2.5,
					"yaw": 80,
					"type": "scene",
                   
					"cssClass": "custom-hotspot-flecha",
					"sceneId": "trece"
				},
				{
					"pitch": -5,
					"yaw": -100,
					"type": "scene",
                  
					"cssClass": "custom-hotspot-flecha",
					"sceneId": "undecimo"
				}
				
			]
	  },  
	    "trece": {
			"hfov": 120,
            "pitch": -3,
            "yaw": 117,
            "type": "equirectangular",
            "panorama": "99.jpg",
			"hotSpots": [
				{
					"pitch": -6.9,
					"yaw": 139,
					"type": "scene",
                   
					"cssClass": "custom-hotspot-flecha",
					"sceneId": "catorce"
				},
				{
					"pitch":  -8.9,
					"yaw": -63.5,
					"type": "scene",
                  
					"cssClass": "custom-hotspot-flecha",
					"sceneId": "duodecima"
				}	
			]
	  },	  
	    "catorce": {
			"hfov": 120,
            "pitch": -3,
            "yaw": 117,
            "type": "equirectangular",
            "panorama": "100.jpg",
			"hotSpots": [
				{
					"pitch": -5,
					"yaw": -60,
					"type": "scene",
                    
					"cssClass": "custom-hotspot-flecha",
					"sceneId": "cuarta"
				},
				{
					"pitch": -14,
					"yaw": 46,
					"type": "scene",
                   
					"cssClass": "custom-hotspot-flecha",
					"sceneId": "trece"
				}
				
			]
	  }
	  
	  
	  }
});
//click para ver mas informacion
  
  function panel(hotSpotDiv,args){
    // Get the modal
    var modal = document.getElementById(args);
    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];
	var span2 = document.getElementsByClassName("close")[1]
    // When the user clicks the button, open the modal 
    modal.style.display = "block";
    // When the user clicks on <span> (x), close the modal
    span.onclick = function() {
      modal.style.display = "none";
    }
	span2.onclick = function() {
      modal.style.display = "none";
    }
    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
      if (event.target == modal) {
          modal.style.display = "none";
      }
    }
  }

  //botones de zoom y full screen
  
	
document.getElementById('fullscreen').addEventListener('click', function(e) {
	viewer.toggleFullscreen();
	
	
});

  
</script>
<script>
		var alturaTransparente = $('#transparente').height();
		var anchuraTransparente = $('#transparente').width();
		

	   
	
	
	
	$('#movil').draggable({
		drag: function(evt,ui)
		{
			//anchura transparente: 1089px
			//altura trasparente: 769px

			if (ui.position.left < -589)
				 ui.position.left = anchuraTransparente - $(this).width(); 
			if (ui.position.left + $(this).width()> anchuraTransparente+589)
				  ui.position.left = 0;
			if (ui.position.top < -269 ){
				ui.position.top = alturaTransparente - $(this).height();
			}
			if (ui.position.top + $(this).height() > alturaTransparente+269){
					ui.position.top = 0;
			}
				

		}                 
	});
  </script>
  </body>
</html>